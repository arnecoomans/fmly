{% extends "index.html" %}

{% block pagetitle %}{{ page_scope|default:'alle documenten' }}{% endblock %}

{% block css %}{% endblock %}

{% block content %}
  <div class="content-block node documents">
    <header>
      <h2>Overzicht van {{ page_scope|default:'alle personen' }} ({{ person_list.all.count }}):</h2>
      {% if page_navigation %}<p class="page-description">{{ page_navigation|safe }}</p>{% endif %}
      {{ page_description }}
      <!-- {{ dev }}
      {{ filter }} -->
      <div class="filters">
        <span class="option">
          <form method="get">
            {% if filter.family %}<input type="hidden" name="family" value="{{ filter.family }}">{% endif %}
            {% if filter.century %}<input type="hidden" name="century" value="{{ filter.century }}">{% endif %}
            {% if filter.decade %}<input type="hidden" name="decade" value="{{ filter.decade }}">{% endif %}
            {% if filter.year %}<input type="hidden" name="year" value="{{ filter.year }}">{% endif %}
            <label for="has_photo">Met afbeelding</label><input type="checkbox" name="has_photo" value="true" {% if filter.has_photo %} checked{% endif %} onchange="this.form.submit()">
          </form>
        </span>
        <span class="option">
          <form method="get">
            {% if filter.has_photo %}<input type="hidden" name="has_photo" value="true">{% endif %}
            {% if filter.century %}<input type="hidden" name="century" value="{{ filter.century }}">{% endif %}
            {% if filter.decade %}<input type="hidden" name="decade" value="{{ filter.decade }}">{% endif %}
            {% if filter.year %}<input type="hidden" name="year" value="{{ filter.year }}">{% endif %}
            <label for="family">Familie: </label>
            <select name="family" onchange="this.form.submit()">
              <option value="all">-----</option>
              {% for family in available_families %}
                <option value="{{ family }}" {% if filter.family == family %} selected{% endif %}>{{ family }}</option>
              {% endfor %}
            </select>
          </form>
        </span>
        {% if not filter.years and not filter.century %}
          <span class="option">
            <form method="get">
              {% if filter.has_photo %}<input type="hidden" name="has_photo" value="true">{% endif %}
              {% if filter.family %}<input type="hidden" name="family" value="{{ filter.family }}">{% endif %}
              <label for="decade">Decennium: </label>
              <select name="decade" onchange="this.form.submit()">
                <option value="all">-----</option>
                {% for decade in available_decades %}
                  <option value="{{ decade }}"{% if decade == filter.decade %} selected{% endif %}>{{ decade }}</option>
                {% endfor %}
              </select>
            </form>
          </span>
        {% endif %}
        {% if not filter.years and not filter.decade %}
          <span class="option">
            <form method="get">
              {% if filter.has_photo %}<input type="hidden" name="has_photo" value="true">{% endif %}
              {% if filter.family %}<input type="hidden" name="family" value="{{ filter.family }}">{% endif %}
              <label for="century">Eeuw: </label>
              <select name="century" onchange="this.form.submit()">
                <option value="all">-----</option>
                {% for century in available_centuries %}
                  <option value="{{ century }}"{% if century == filter.century %} selected{% endif %}>{{ century }}</option>
                {% endfor %}
              </select>
            </form>
          </span>
        {% endif %}
      </div>
    </header>
    {% if perms.archive.view_person %}
      {% if person_list %}
        <div>
          {% for person in person_list %}
            {% if forloop.first %}
              <ul class="object-list has-icons">
            {% endif %}
            {% ifchanged person.last_name %}
              </ul>
              <h5>{{ person.last_name }}</h5>
              <ul class="object-list has-icons">
            {% endifchanged %}
            <li class="person person-icon">{% include 'archive/inline_personlink.html' %}</li>
          {% endfor %}
          </ul>
          {% if perms.archive.create_person %}
            <ul class="has-icons admin-functions">
              {% if origin == 'person' and perms.archive.create_person %}
                <li class="edit-icon"><a href="{% url 'archive:add-person' %}">Persoon aanmaken</a></li>
              {% endif %}
            </ul>
          {% endif %}
        </div>
      {% endif %}
    {% else %}
      {% include 'archive/inline_insufficient_rights.html' %}
    {% endif %}
  </div>
{% endblock %}